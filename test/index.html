<!DOCTYPE html>
<html>
    <head lang="en">
        <title>vn.js test</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="UTF-8" />

        <!-- Registers all vn components to the DOM. Must be imported first to display the <vn-player> on a page. -->
        <script src="../vn.js" type="module"></script>

        <!-- Just some default styles for testing -->
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
                background-color: #222;
            }

            body > .vn-container {
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                display: flex;
                justify-content: center;
                place-items: center;
                height: 100%;
                overflow: hidden;
            }

            vn-actor {
                transition: all 0.1s allow-discrete;
            }
            
            vn-actor:not(.speaking) {
                filter: grayscale(0.1) brightness(0.8);
            }

            vn-actor.speaking {
                transform: scale(1.02) !important;
            }

            @keyframes fadein {
                0% {
                    opacity: 0;
                }
                100% {
                    opacity: 1;
                }
            }

            vn-scene {
                animation: fadein 10s linear;
            }
        </style>
    </head>

    <body>
        <div class="vn-container">
            <vn-player>
                <!-- 
                    A project holds persistent information such as importable media, actors, textboxes and their default state.
                    When an element is inserted into the <vn-scene> that references a `uid`, 
                    the player will look for the element in the project and attempt to clone it, overriding any attributes that are set.

                    While it's perfectly valid to insert elements into <vn-scene> manually, you usually manipulate the scene
                    via the scripting API.
                 -->
                <vn-project itemscope>
                    <!-- Projects should always have these meta tags -->
                    <meta itemprop="name" content="Untitled Visual Novel" />
                    <meta itemprop="description" content="An example visual novel using vn.js" />
                    <meta itemprop="author" content="Anon" />
                    <meta itemprop="version" content="1.0" />
                    <meta itemprop="date" content="2025-04-29" />
                    <meta itemprop="license" content="MIT" />
                    
                    <!-- new: removed <vn-project>, assets are now defined directly instice <vn-project> -->
                    <vn-actor
                        uid="kacey"
                        name="Kacey"
                        inline-layer-order="face, pose"
                        &mouth="sulk"
                        &eyes="scrutinize"
                        &pose="neutral"
                    >
                            <!-- new: 'trigger' to support dynamically toggling actor images at runtime -->
                        <vn-layer uid="pose">
                            <img src="images/actors/kacey/pose-neutral.png" uid="neutral" trigger="<-<" />
                            <img src="images/actors/kacey/pose-crossed-arms.png" uid="crossed-arms" trigger="x-<" />
                        </vn-layer>
                        <vn-layer uid="eyes">
                            <img src="images/actors/kacey/pose-neutral-eyes-neutral.png" uid="neutral" trigger=":" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-eyes-^^.png" uid="happy" trigger="^^" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-eyes-scrutinize.png" uid="scrutinize" trigger="):" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-eyes-silly.png" uid="silly" trigger="X" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-eyes-sad.png" uid="sad" trigger="<:" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-eyes-angry.png" uid="angry" trigger=">:" &pose="neutral" />
                        </vn-layer>
                        <vn-layer uid="mouth">
                            <img src="images/actors/kacey/pose-neutral-mouth-neutral.png" uid="neutral" trigger="|" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-mouth-open.png" uid="open" trigger="D" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-mouth-sulk.png" uid="sulk" trigger="I" &pose="neutral" />
                            <img src="images/actors/kacey/pose-neutral-mouth-silly.png" uid="silly" trigger="P" &pose="neutral" />
                        </vn-layer>
                    </vn-actor>

                    <img uid="classroom-day" src="images/backgrounds/_back_of_classroom_day.jpg" />
                    <audio uid="everyday" src="audio/music/everyday.mp3"></audio>

                    <text-box
                        uid="default"
                        title=""
                        ms="25"
                        font-size="24px"
                        color="#fff"
                        left="5%"
                        right="5%"
                        bottom="5%"
                        height="33%"
                        charIntervals[a]="10000%"
                        scrolling
                    >
                        <vn-style>
                            :host {
                                :scope {
                                    font-family: "Courier New", Courier, monospace;
                                    font-weight: 400;
                                    text-align: left;
                                    text-shadow: 0px 0px 5px #000000aa;
                                }
                            }
                        </vn-style>
                    </text-box>

                    <text-box 
                        choices
                        uid="choices-default"
                        ms="25"
                        font-size="24px"
                        color="#fff"
                        left="5%"
                        right="5%"
                        bottom="5%"
                        height="50%"
                        background-color="#000000aa"
                        border-radius="10px"
                    ></text-box>
                </vn-project>

                <vn-scene textbox="default" choices="choices-default">
                    <vn-script src="./llm-test.vn.js"></vn-script>
                </vn-scene>
            </vn-player>
        </div>
    </body>
</html>
